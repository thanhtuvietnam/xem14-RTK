const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vidstack-D-lDNP4T-j9V5GKUq.js","assets/index-xleVCo4H.js","assets/index-DJJvdChH.css"])))=>i.map(i=>d[i]);
var f=a=>{throw TypeError(a)};var u=(a,e,t)=>e.has(a)||f("Cannot "+t);var c=(a,e,t)=>(u(a,e,"read from private field"),t?t.call(a):e.get(a)),C=(a,e,t)=>e.has(a)?f("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),w=(a,e,t,o)=>(u(a,e,"write to private field"),o?o.call(a,t):e.set(a,t),t),s=(a,e,t)=>(u(a,e,"access private method"),t);import{l as I,I as P,y as k,z as A,c as O,x as R,_ as b,h as D}from"./index-xleVCo4H.js";function G(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function L(){var a;return!!((a=window.cast)!=null&&a.framework)}function M(){var a,e;return!!((e=(a=window.chrome)==null?void 0:a.cast)!=null&&e.isAvailable)}function E(){return g().getCastState()===cast.framework.CastState.CONNECTED}function g(){return window.cast.framework.CastContext.getInstance()}function v(){return g().getCurrentSession()}function N(){var a;return(a=v())==null?void 0:a.getSessionObj().media[0]}function z(a){var t;return((t=N())==null?void 0:t.media.contentId)===(a==null?void 0:a.src)}function T(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function F(a){return`Google Cast Error Code: ${a}`}function $(a,e){return I(g(),a,e)}var n,r,y,_,S,l,d;class U{constructor(){C(this,r);C(this,n);this.name="google-cast"}get cast(){return g()}mediaType(){return"video"}canPlay(e){return P&&!k&&A(e)}async prompt(e){var h;let t,o,i;try{t=await s(this,r,y).call(this,e),c(this,n)||(w(this,n,new cast.framework.RemotePlayer),new cast.framework.RemotePlayerController(c(this,n))),o=e.player.createEvent("google-cast-prompt-open",{trigger:t}),e.player.dispatchEvent(o),s(this,r,l).call(this,e,"connecting",o),await s(this,r,_).call(this,O(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:(h=v())==null?void 0:h.getCastDevice().friendlyName}),E()&&s(this,r,l).call(this,e,"connected",o)}catch(p){const m=p instanceof Error?p:s(this,r,d).call(this,(p+"").toUpperCase(),"Prompt failed.");throw i=e.player.createEvent("google-cast-prompt-error",{detail:m,trigger:o??t,cancelable:!0}),e.player.dispatch(i),s(this,r,l).call(this,e,E()?"connected":"disconnected",i),m}finally{e.player.dispatch("google-cast-prompt-close",{trigger:i??o??t})}}async load(e){if(R)throw Error("[vidstack] can not load google cast provider server-side");if(!c(this,n))throw Error("[vidstack] google cast player was not initialized");return new(await b(async()=>{const{GoogleCastProvider:t}=await import("./vidstack-D-lDNP4T-j9V5GKUq.js");return{GoogleCastProvider:t}},__vite__mapDeps([0,1,2]))).GoogleCastProvider(c(this,n),e)}}n=new WeakMap,r=new WeakSet,y=async function(e){if(L())return;const t=e.player.createEvent("google-cast-load-start");e.player.dispatch(t),await D(G()),await customElements.whenDefined("google-cast-launcher");const o=e.player.createEvent("google-cast-loaded",{trigger:t});if(e.player.dispatch(o),!M())throw s(this,r,d).call(this,"CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return o},_=async function(e){s(this,r,S).call(this,e);const t=await this.cast.requestSession();if(t)throw s(this,r,d).call(this,t.toUpperCase(),F(t))},S=function(e){var t;(t=this.cast)==null||t.setOptions({...T(),...e})},l=function(e,t,o){const i={type:"google-cast",state:t};e.notify("remote-playback-change",i,o)},d=function(e,t){const o=Error(t);return o.code=e,o};var J=Object.freeze({__proto__:null,GoogleCastLoader:U});export{g as getCastContext,F as getCastErrorMessage,v as getCastSession,N as getCastSessionMedia,z as hasActiveCastSession,$ as listenCastContextEvent,J as loader};
