var d=i=>{throw TypeError(i)};var c=(i,t,s)=>t.has(i)||d("Cannot "+s);var e=(i,t,s)=>(c(i,t,"read from private field"),s?s.call(i):t.get(i)),h=(i,t,s)=>t.has(i)?d("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,s),g=(i,t,s,a)=>(c(i,t,"write to private field"),a?a.call(i,s):t.set(i,s),s),u=(i,t,s)=>(c(i,t,"access private method"),s);import{n as m,l as p,e as y,c as w,w as M,x as A,b as P}from"./index-xleVCo4H.js";var r,o,f,b;class O{constructor(t){h(this,o);h(this,r);this.src=m(""),this.referrerPolicy=null,g(this,r,t),t.setAttribute("frameBorder","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return e(this,r)}setup(){p(window,"message",u(this,o,b).bind(this)),p(e(this,r),"load",this.onLoad.bind(this)),y(u(this,o,f).bind(this))}postMessage(t,s){var a;A||(a=e(this,r).contentWindow)==null||a.postMessage(JSON.stringify(t),s??"*")}}r=new WeakMap,o=new WeakSet,f=function(){const t=this.src();if(!t.length){e(this,r).setAttribute("src","");return}const s=w(()=>this.buildParams());e(this,r).setAttribute("src",M(t,s))},b=function(t){var l;const s=this.getOrigin();if((t.source===null||t.source===((l=e(this,r))==null?void 0:l.contentWindow))&&(!P(s)||s===t.origin)){try{const n=JSON.parse(t.data);n&&this.onMessage(n,t);return}catch{}t.data&&this.onMessage(t.data,t)}};export{O as E};
